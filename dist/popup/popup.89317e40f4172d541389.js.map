{"version":3,"file":"popup/popup.89317e40f4172d541389.js","mappings":"mBAEA,MAAMA,EACLC,YAAYC,GACXC,KAAKD,MAAQA,EACbC,KAAKC,KAAOD,KAAKD,MAAMG,cAAc,qBACrCF,KAAKG,qBAAuBH,KAAKD,MAAMK,QAAQC,qBAC/CL,KAAKM,aACJN,KAAKG,sBAAwBH,KAAKO,gBAAgBP,KAAKG,sBACpDK,SAASC,iBAAiBT,KAAKG,sBAC/B,GACJH,KAAKU,cAAgBV,KAAKD,MAAMU,iBAAiB,8BACjDT,KAAKW,kBAAoBX,KAAKY,uBAC9BZ,KAAKa,sBAAwBb,KAAKW,kBAAkB,GACpDX,KAAKc,qBAAuBd,KAAKW,kBAAkBX,KAAKW,kBAAkBI,OAAS,GACnFf,KAAKgB,YAAc,SACnBhB,KAAKiB,mBAAgBC,EAErB,MAAMC,EAAqBC,OAAOC,SAASC,KACvCH,GACHnB,KAAKM,aAAaiB,SAASC,IAC1B,MAAMC,EAAcD,EAAQF,KACxBG,GAAeA,IAAgBN,GAClCnB,KAAK0B,WACN,IAIE1B,KAAKM,aAAaS,QACrBf,KAAKM,aAAaiB,SAASI,IAC1BA,EAAYC,iBAAiB,SAAUC,IACtCA,EAAEC,iBACF9B,KAAK0B,YACL1B,KAAKiB,cAAgBU,CAAW,GAC/B,IAIA3B,KAAKM,aAAaS,QACrBf,KAAKU,cAAca,SAASQ,IAC3BA,EAAaH,iBAAiB,SAAUC,IACvCA,EAAEC,iBACF9B,KAAKgC,YAAY,GAChB,IAIJxB,SAASoB,iBAAiB,WAAYC,IACvB,WAAVA,EAAEI,KACLjC,KAAKgC,YACN,IAGDhC,KAAKD,MAAM6B,iBAAiB,SAAS,KACpC5B,KAAKgC,YAAY,IAGlBhC,KAAKC,KAAK2B,iBAAiB,SAAUC,IACpCA,EAAEK,iBAAiB,GAErB,CAEA3B,gBAAgB4B,GACf,IACC3B,SAASC,iBAAiB0B,EAK3B,CAJE,MAAON,GACR,GAAIA,aAAaO,aAChB,OAAO,CAET,CACA,OAAO,CACR,CAEAC,WACC,QAAOrC,KAAKD,MAAMuC,UAAUC,SAASvC,KAAKgB,YAC3C,CAEAwB,YACCxC,KAAKD,MAAM6B,iBAAiB,WAAYa,IACrB,QAAdA,EAAMR,KAAmC,IAAlBQ,EAAMC,UAC5BD,EAAME,SAELnC,SAASoC,gBAAkB5C,KAAKa,wBACnC4B,EAAMX,iBACN9B,KAAKc,qBAAqB+B,SAIvBrC,SAASoC,gBAAkB5C,KAAKc,uBACnC2B,EAAMX,iBACN9B,KAAKa,sBAAsBgC,SAG9B,GAEF,CAEAjC,uBACC,OAAOkC,MAAMC,KACZ/C,KAAKD,MAAMU,iBACV,uFAEAuC,QAAQC,IAAQA,EAAGC,aAAa,cAAgBD,EAAGE,aAAa,gBAA8B,WAAZF,EAAGG,MACxF,CAEA1B,YACM1B,KAAKqC,aACTrC,KAAKD,MAAMuC,UAAUe,IAAIrD,KAAKgB,aAC9BhB,KAAKD,MAAMuD,SAAS,EAAG,GACvBtD,KAAKD,MAAM6B,iBAAiB,iBAAkBa,IACzCA,EAAMc,SAAWvD,KAAKD,OAASC,KAAKqC,YACvCrC,KAAKa,sBAAsBgC,OAC5B,IAED7C,KAAKwC,YAEP,CAEAR,aACKhC,KAAKqC,aACRrC,KAAKD,MAAMuC,UAAUkB,OAAOxD,KAAKgB,aACjChB,KAAKiB,eAAe4B,MAAM,CACzBY,eAAe,IAGlB,EAGcjD,SAASC,iBAAiB,gBAElCc,SAASxB,IACf,IAAIF,EAAUE,GACdA,EAAM2D,gBAAgB,SAAS,G","sources":["webpack://srsly/./src/js/popup.js"],"sourcesContent":["import \"../scss/components/_popup.scss\";\r\n\r\nclass MainPopup {\r\n\tconstructor(popup) {\r\n\t\tthis.popup = popup;\r\n\t\tthis.main = this.popup.querySelector(\"[data-popup-main]\");\r\n\t\tthis.togglerOpenSelectors = this.popup.dataset.popupTriggerSelector;\r\n\t\tthis.togglersOpen =\r\n\t\t\tthis.togglerOpenSelectors && this.isValidSelector(this.togglerOpenSelectors)\r\n\t\t\t\t? document.querySelectorAll(this.togglerOpenSelectors)\r\n\t\t\t\t: [];\r\n\t\tthis.togglersClose = this.popup.querySelectorAll(\"[data-popup-toggler-close]\");\r\n\t\tthis.focusableElements = this.getFocusableElements();\r\n\t\tthis.firstFocusableElement = this.focusableElements[0];\r\n\t\tthis.lastFocusableElement = this.focusableElements[this.focusableElements.length - 1];\r\n\t\tthis.activeClass = \"active\";\r\n\t\tthis.popupOpenedBy = undefined;\r\n\r\n\t\tconst windowLocationHash = window.location.hash;\r\n\t\tif (windowLocationHash) {\r\n\t\t\tthis.togglersOpen.forEach((toggler) => {\r\n\t\t\t\tconst togglerHash = toggler.hash;\r\n\t\t\t\tif (togglerHash && togglerHash === windowLocationHash) {\r\n\t\t\t\t\tthis.popupShow();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.togglersOpen.length) {\r\n\t\t\tthis.togglersOpen.forEach((togglerOpen) => {\r\n\t\t\t\ttogglerOpen.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.popupShow();\r\n\t\t\t\t\tthis.popupOpenedBy = togglerOpen;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.togglersOpen.length) {\r\n\t\t\tthis.togglersClose.forEach((togglerClose) => {\r\n\t\t\t\ttogglerClose.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.popupClose();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener(\"keydown\", (e) => {\r\n\t\t\tif (e.key === \"Escape\") {\r\n\t\t\t\tthis.popupClose();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.popup.addEventListener(\"click\", () => {\r\n\t\t\tthis.popupClose();\r\n\t\t});\r\n\r\n\t\tthis.main.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\t}\r\n\r\n\tisValidSelector(selector) {\r\n\t\ttry {\r\n\t\t\tdocument.querySelectorAll(selector);\r\n\t\t} catch (e) {\r\n\t\t\tif (e instanceof DOMException) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisActive() {\r\n\t\treturn this.popup.classList.contains(this.activeClass) ? true : false;\r\n\t}\r\n\r\n\tfocusTrap() {\r\n\t\tthis.popup.addEventListener(\"keydown\", (event) => {\r\n\t\t\tif (event.key === \"Tab\" || event.keyCode === 9) {\r\n\t\t\t\tif (event.shiftKey) {\r\n\t\t\t\t\t// if shift key pressed for shift + tab combination\r\n\t\t\t\t\tif (document.activeElement === this.firstFocusableElement) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tthis.lastFocusableElement.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if tab key is pressed\r\n\t\t\t\t\tif (document.activeElement === this.lastFocusableElement) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tthis.firstFocusableElement.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetFocusableElements() {\r\n\t\treturn Array.from(\r\n\t\t\tthis.popup.querySelectorAll(\r\n\t\t\t\t'a[href], button, input, textarea, select, details, [tabindex]:not([tabindex=\"-1\"])'\r\n\t\t\t)\r\n\t\t).filter((el) => !el.hasAttribute(\"disabled\") && !el.getAttribute(\"aria-hidden\") && el.type !== \"hidden\");\r\n\t}\r\n\r\n\tpopupShow() {\r\n\t\tif (!this.isActive()) {\r\n\t\t\tthis.popup.classList.add(this.activeClass);\r\n\t\t\tthis.popup.scrollTo(0, 0);\r\n\t\t\tthis.popup.addEventListener(\"transitionend\", (event) => {\r\n\t\t\t\tif (event.target === this.popup && this.isActive()) {\r\n\t\t\t\t\tthis.firstFocusableElement.focus();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.focusTrap();\r\n\t\t}\r\n\t}\r\n\r\n\tpopupClose() {\r\n\t\tif (this.isActive()) {\r\n\t\t\tthis.popup.classList.remove(this.activeClass);\r\n\t\t\tthis.popupOpenedBy?.focus({\r\n\t\t\t\tpreventScroll: true,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst popups = document.querySelectorAll(\"[data-popup]\");\r\n\r\npopups.forEach((popup) => {\r\n\tnew MainPopup(popup);\r\n\tpopup.removeAttribute(\"hidden\");\r\n});\r\n"],"names":["MainPopup","constructor","popup","this","main","querySelector","togglerOpenSelectors","dataset","popupTriggerSelector","togglersOpen","isValidSelector","document","querySelectorAll","togglersClose","focusableElements","getFocusableElements","firstFocusableElement","lastFocusableElement","length","activeClass","popupOpenedBy","undefined","windowLocationHash","window","location","hash","forEach","toggler","togglerHash","popupShow","togglerOpen","addEventListener","e","preventDefault","togglerClose","popupClose","key","stopPropagation","selector","DOMException","isActive","classList","contains","focusTrap","event","keyCode","shiftKey","activeElement","focus","Array","from","filter","el","hasAttribute","getAttribute","type","add","scrollTo","target","remove","preventScroll","removeAttribute"],"sourceRoot":""}